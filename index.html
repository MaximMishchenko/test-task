<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <title>Users</title>
</head>
<body ng-controller="appCtrl as main" ng-cloak>
    
<form name="userForm">
    <div class="form-group">
        <input type="text" name="firstname" class="form-control" placeholder="First name" ng-model="main.firstName" ng-minlength="2" ng-maxlength="15" required>
        <p ng-show="userForm.firstname.$invalid && !userForm.name.$pristine" class="help-block">Your first name is required.</p>
        <p ng-show="userForm.firstname.$error.minlength" class="help-block">First name is too short.</p>
        <p ng-show="userForm.firstname.$error.maxlength" class="help-block">First name is too long.</p>

        <input type="text" name="secondname" class="form-control" placeholder="Second name" ng-model="main.secondName" required>
        <p ng-show="userForm.secondname.$invalid && !userForm.name.$pristine" class="help-block">Your second name is required.</p>
        <p ng-show="userForm.secondname.$error.minlength" class="help-block">Second name is too short.</p>
        <p ng-show="userForm.secondname.$error.maxlength" class="help-block">Second name is too long.</p>
        
        <input type="email" name="email" class="form-control" placeholder="Email" ng-model="main.email" required>
        <p ng-show="userForm.email.$invalid && !userForm.name.$pristine" class="help-block">Your email is required.</p>
        <p ng-show="userForm.email.$invalid && !userForm.email.$pristine" class="help-block">Enter a valid email.</p> 

        <button type="submit" class="btn btn-primary" ng-click="main.insertUser(userForm.$valid)">Add user</button>
        <button type="submit" class="btn btn-warning" name="editBtn" ng-show="main.isVisible" ng-click="main.updateUser()">Update</button>
    </div>   
</form>

<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <th>First name</th>
                <th>Second name</th>
                <th>E-mail</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="user in main.users"> 
                <td>{{user.first_name}}</td>
                <td>{{user.second_name}}</td>
                <td>{{user.email}}</td>
                <td>
                    <button class="btn btn-danger" ng-click="main.removeUser(user.id)">Delete</button>
                    <button class="btn btn-warning" ng-click="main.editData(user)">Edit</button>
                </td>               
            </tr>
        </tbody>
    </table>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.0/angular.min.js"></script>
<script src="js/app.js"></script>
</body>
</html>